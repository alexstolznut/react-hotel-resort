{"ast":null,"code":"import _objectSpread from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/alexanderstolzoff/Desktop/Projects/resort/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Client from'./contentful';var RoomContext=React.createContext();//\nvar RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);var _super=_createSuper(RoomProvider);function RoomProvider(){var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:'all',capacity:1,price:400,minPrice:0,maxPrice:0,size:1000,minSize:0,maxSize:0,breakfast:false,pets:false};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,rooms,featuredRooms,maxPrice,maxSize;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:'hotelRooms',order:'sys.createdAt'});case 3:response=_context.sent;rooms=_this.formatData(response.items);featuredRooms=rooms.filter(function(rooms){return rooms.featured==true;});maxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));maxSize=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.size;})));_this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,maxPrice:maxPrice,size:maxSize,maxSize:maxSize});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var name=event.target.name;var value=target.type==='checkbox'?target.checked:event.target.value;console.log(target.checked);_this.setState(_defineProperty({},name,value),_this.sortedRooms);};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(images){return images.fields.file.url;});var rooms=_objectSpread({},item.fields,{images:images,id:id});return rooms;});return tempItems;}},{key:\"sortedRooms\",value:function sortedRooms(){var _this$state=this.state,price=_this$state.price,pets=_this$state.pets,capacity=_this$state.capacity,size=_this$state.size,breakfast=_this$state.breakfast,type=_this$state.type,minSize=_this$state.minSize,maxSize=_this$state.maxSize;var tempRooms=_toConsumableArray(this.state.rooms);capacity=parseInt(capacity);console.log(minSize);price=parseInt(price);minSize=parseInt(minSize);maxSize=parseInt(maxSize);if(minSize=\"NaN\"){minSize=0;}// if(minSize === \"\" || minSize === NaN || minSize === null || minSize < 0) {\n//     minSize = 0;\n//     console.log(minSize)\n// }\nif(type!='all'){tempRooms=tempRooms.filter(function(items){return items.type===type&&items.price<=price&&items.capacity>=capacity&&items.size>=minSize&&items.size<=maxSize;});}else{tempRooms=tempRooms.filter(function(items){return items.price<=price&&items.capacity>=capacity&&items.size<=maxSize&&items.size>=minSize;});}if(breakfast){tempRooms=tempRooms.filter(function(item){return item.breakfast===true;});}if(pets){tempRooms=tempRooms.filter(function(item){return item.pets===true;});}tempRooms.map(function(items){return parseInt(items.capacity);});this.setState({sortedRooms:tempRooms});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(RoomContext.Provider,{value:_objectSpread({},this.state,{getRoom:this.getRoom,handleChange:this.handleChange})},this.props.children);}}]);return RoomProvider;}(Component);var RoomConsumer=RoomContext.Consumer;export function withRoomConsumer(Component){return function ConsumerWrapper(props){return/*#__PURE__*/React.createElement(RoomConsumer,null,function(value){return/*#__PURE__*/React.createElement(Component,Object.assign({},props,{context:value}));});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"sources":["/Users/alexanderstolzoff/Desktop/Projects/resort/src/context.js"],"names":["React","Component","Client","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","size","minSize","maxSize","breakfast","pets","getData","getEntries","content_type","order","response","formatData","items","filter","featured","Math","max","map","item","setState","console","log","getRoom","slug","tempRooms","room","find","handleChange","event","target","name","value","checked","tempItems","id","sys","images","fields","file","url","parseInt","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Client from './contentful'\nconst RoomContext = React.createContext();\n\n\n \n//\n\nclass RoomProvider extends Component {\n\n    state = {\n        rooms: [],\n        sortedRooms: [],\n        featuredRooms:[],\n        loading: true,\n        type: 'all',\n        capacity: 1,\n        price: 400, \n        minPrice: 0,\n        maxPrice: 0,\n        size: 1000,\n        minSize: 0,\n        maxSize: 0,\n        breakfast: false,\n        pets: false\n\n    };\n\n    getData = async () =>{\n\n        try {\n            let response = await Client.getEntries({\n                content_type: 'hotelRooms',\n                order: 'sys.createdAt'\n            });\n            let rooms = this.formatData(response.items)\n            let featuredRooms = rooms.filter(rooms=>rooms.featured==true);\n        let maxPrice = Math.max(...rooms.map(item=>item.price));\n        let maxSize = Math.max(...rooms.map(item=>item.size));\n        this.setState({\n            rooms,\n            featuredRooms,\n            sortedRooms: rooms,\n            loading: false,\n            price: maxPrice,\n            maxPrice: maxPrice,\n            size: maxSize,\n            maxSize: maxSize\n        })\n\n        } catch (error) {\n            console.log(error)\n        }\n    //     let rooms;\n    //     Client.getEntries({\n    //         content_type: \"hotelRooms\"\n    //     }).then(response => rooms = this.formatData(response.items)).then(reponse=>{\n    //     // let sortedRooms = this.formatData(this.sortedRooms())\n    //     let featuredRooms = rooms.filter(rooms=>rooms.featured==true);\n    //     let maxPrice = Math.max(...rooms.map(item=>item.price));\n    //     let maxSize = Math.max(...rooms.map(item=>item.size));\n    //     this.setState({\n    //         rooms,\n    //         featuredRooms,\n    //         sortedRooms: rooms,\n    //         loading: false,\n    //         price: maxPrice,\n    //         maxPrice: maxPrice,\n    //         size: maxSize,\n    //         maxSize: maxSize\n    //     })\n    //     // console.log(sortedRooms)\n    //     console.log(featuredRooms)\n    // });\n    }\n\n\n    componentDidMount(){\n       this.getData();\n    }\n\n\n    formatData(items) {\n        let tempItems = items.map(item=>{\n            let id = item.sys.id;\n            let images = item.fields.images.map(images=>images.fields.file.url);\n            let rooms = {...item.fields, images, id};\n            return rooms;\n        });\n        return tempItems;\n\n    }\n\n    sortedRooms() {\n        let {price, pets, capacity, size, breakfast, type, minSize, maxSize} = this.state;\n        let tempRooms = [...this.state.rooms]\n        capacity = parseInt(capacity);\n        console.log(minSize);\n        price = parseInt(price);\n        minSize = parseInt(minSize);\n        maxSize = parseInt(maxSize);\n\n        if(minSize = \"NaN\"){\n            minSize = 0\n        }\n       \n        // if(minSize === \"\" || minSize === NaN || minSize === null || minSize < 0) {\n        //     minSize = 0;\n        //     console.log(minSize)\n        // }\n        if( type != 'all') {\n            tempRooms = tempRooms.filter(items => items.type === type && items.price <= price && items.capacity >= capacity && items.size >= minSize && items.size <= maxSize);\n        } else {\n            tempRooms = tempRooms.filter(items =>  items.price <= price &&  items.capacity >= capacity && items.size <= maxSize && items.size >= minSize);\n        }\n        if (breakfast){\n            tempRooms = tempRooms.filter(item => item.breakfast === true)\n        }\n\n        if (pets){\n            tempRooms = tempRooms.filter(item => item.pets === true)\n        }\n        tempRooms.map(items=> parseInt(items.capacity))\n        this.setState({\n            sortedRooms: tempRooms\n        })\n        \n        \n    }\n\n    \n\n    getRoom = slug => {\n        let tempRooms = [...this.state.rooms];\n        const room = tempRooms.find(room => room.slug===slug);\n        return room;\n    }\n\n    handleChange = event => {\n        const target = event.target;\n        const name = event.target.name;\n        const value =  target.type === 'checkbox' ? target.checked : event.target.value;\n        console.log(target.checked);\n        this.setState({\n            [name]: value \n        }, this.sortedRooms);\n    }\n    \n    render() {\n        return (\n            <RoomContext.Provider value={{...this.state, getRoom:this.getRoom, handleChange: this.handleChange}}>\n                {this.props.children}\n            </RoomContext.Provider>\n        )\n    }\n}\n\n\n\nconst RoomConsumer = RoomContext.Consumer;\n\nexport function withRoomConsumer(Component) {\n    return function ConsumerWrapper(props) {\n        return <RoomConsumer>\n            {value => <Component {...props} context={value}/>}\n        </RoomConsumer>\n    }\n}\n\nexport {RoomProvider, RoomConsumer, RoomContext}"]},"metadata":{},"sourceType":"module"}